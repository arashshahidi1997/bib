---
type: readme
---

# Bibliography
This folder contains bibliography files for the Pixecog project documentation and manuscript.

`pixecog.bib` is the main BibTeX file used across the documentation and manuscript sources. It includes references cited in various Markdown files throughout the `docs/` folder as well as in the manuscript drafts located in `docs/manuscript/`.

# Using Citations
When adding citations in Markdown files, use the standard citation syntax supported by Foam and Pandoc, e.g., `[@doe2020study]`, where `doe2020study` corresponds to the citation key in `pixecog.bib`.


# Setup Instructions
To add new references, do not edit this file directly. Instead, use a reference manager like Zotero or Mendeley to manage your citations and export the updated BibTeX file here under `metadata` subdirectory.

`src-<name>-pixecog.bib`

## On Your Local Machine
you can export it in a local clone of the `pixecog` repository in a `keep updated` bibtex format.

By running the `code/fetch.py` script, you can automatically fetch and update these source bibliography files from their respective online repositories. This ensures that your references remain current and accurate.

And then datalad push --to origin and update here.

## On the Server
The `pixecog.bib` file is updated by running the `code/merge.py` script, which merges all source bibliography files from the `metadata/` subdirectory.

---

# üìò **Figure Extraction Workflow ‚Äî Short Version**

This workflow extracts figures from scientific papers using a **priority approach**:

1. **Try online HTML sources first** (publisher, PubMed ‚Üí PMC)
2. **Fall back to PDF extraction** using `pdffigures2`
3. Select the best result and expose it as `preferred/`

Everything is driven by **Snakemake**, **BibTeX**, and a simple **Markdown list**.

---

## üóÇÔ∏è Directory Structure

```
pixecog/bib/
  pixecog.bib             # references with doi + PDF path
  extract-figures.md      # list of @citekeys to process
  figures/
    <citekey>/
      online/             # HTML-scraped figures (if found)
      pdffigures2/        # PDF-extracted figures
      preferred/          # symlink to best source
  code/
    figconfig.py          # parse citekeys from markdown
    download_figures.py   # fetch figures from online
  Snakefile
```

---

## ‚öôÔ∏è Components

### **1. Markdown config (`extract-figures.md`)**

List of citekeys like:

```markdown
- @kajikawa_2022_StatesRipples
- @battaglia_2004_HippocampalSharp
```

### **2. BibTeX (`pixecog.bib`)**

Provides:

* `doi = {...}`
* `file = {bib/pdfs/...pdf}` ‚Üí local PDF path
* optional `pmcid = {...}`

### **3. Online Downloader**

`download_figures.py`:

* Tries multiple URLs (DOI ‚Üí PubMed ‚Üí PMC)
* Follows full-text/PMC links
* Scrapes `<figure><img>` elements
* Saves to `figures/<key>/online/figs/`

### **4. PDF Extractor**

Snakemake rule calling:

```
pdffigures -i 300 ...
```

Outputs into:

```
figures/<key>/pdffigures2/
```

### **5. Merge Step**

Chooses:

* `online/` if images found
* otherwise `pdffigures2/`

Creates:

```
figures/<key>/preferred/   (symlink)
```

---

## üß¨ Snakemake Flow

1. **download_figures** ‚Üí `online/`
2. **extract_figures** ‚Üí `pdffigures2/`
3. **merge_figures** ‚Üí `preferred/`
4. **all** ‚Üí processes everything listed in markdown

---

## üéØ Final Outcome

For every paper in `extract-figures.md` you get:

```
figures/<citekey>/preferred/figs/
```

This contains the **best available figures**:

* scraped online if possible
* otherwise extracted from PDFs

Fully automated, reproducible, and citation-driven.
